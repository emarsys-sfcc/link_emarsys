!function s(o,n,i){function l(e,r){if(!n[e]){if(!o[e]){var a="function"==typeof require&&require;if(!r&&a)return a(e,!0);if(u)return u(e,!0);var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}var t=n[e]={exports:{}};o[e][0].call(t.exports,function(r){return l(o[e][1][r]||r)},t,t.exports,s,o,n,i)}return n[e].exports}for(var u="function"==typeof require&&require,r=0;r<i.length;r++)l(i[r]);return l}({1:[function(r,e,a){var t=1,s=1;totalFields&&0<totalFields&&(s=totalFields,t=s),window.Emarsys={addField:function(a,r){var d;a&&r&&(t++,s<a.elementsCount?(s++,a.thirdParam&&a.thirdParamValues?(jQuery("<div/>").attr({class:"dynamic-field attribute",id:"r","data-id":t}).appendTo(a.placeholder_parent),(d=jQuery("<select/>").attr({name:a.placeholder_name,id:a.placeholder_name}).appendTo('#r[data-id="'+t+'"]')).append(jQuery("<option/>").text(a.placeholder_placeholder)),jQuery(a.thirdParamValues.selectOptions).each(function(r,e){d.append(jQuery("<option/>").attr("value",e.value).text(e.name))})):(jQuery("<div/>").attr({class:"dynamic-field",id:"r","data-id":t}).appendTo(a.placeholder_parent),jQuery("<input/>").attr({name:a.placeholder_name,id:a.placeholder_name,type:"text",class:"inputfield_en w100",placeholder:a.placeholder_placeholder}).appendTo('#r[data-id="'+t+'"]')),jQuery("<p/>").attr({class:"red error"}).appendTo('#r[data-id="'+t+'"]'),jQuery("<div/>").attr({class:"dynamic-field",id:"l","data-id":t}).appendTo(a.mappedField_parent),(d=jQuery("<select/>").attr({name:a.mappedField_name,id:a.mappedField_name}).appendTo('#l[data-id="'+t+'"]')).append(jQuery("<option/>").text(a.mappedField_placeholder)),jQuery(r.selectOptions).each(function(r,e){a.thirdParam&&a.thirdParamValues?d.append(jQuery("<option/>").attr("value",e.id).text(e.name)):d.append(jQuery("<option/>").attr("value",e.value).text(e.name))}),jQuery('#l[data-id="'+t+'"]').append("&nbsp; "),jQuery("<a/>").attr({href:"#",id:"removeField",onClick:"Emarsys.removeField('"+t+"')"}).text(a.removeFields_placeholder).appendTo('#l[data-id="'+t+'"]'),jQuery("<p/>").attr({class:"red error"}).appendTo('#l[data-id="'+t+'"]')):jQuery("#oversizedCount").show().delay(5e3).fadeOut())},removeField:function(r){r&&(jQuery('[data-id="'+r+'"]').remove(),s--)},add:function(e,a){jQuery("#addField").on("click",function(r){r.preventDefault(),Emarsys.addField(e,a)})},addError:function(r,e){r&&e&&jQuery(r).find(".error").text(e)},addErrorClass:function(r,e){r&&e&&(jQuery(r).hasClass(e)||jQuery(r).addClass(e))},removeError:function(r,e,a){r&&e&&a&&jQuery(r).change(function(){jQuery(this).removeClass(a),jQuery(e).find(".error").text("")})},validate:function(r,v){jQuery(r).submit(function(){jQuery("p.error").text("");var r,e,a,d,t,s,o,n=jQuery("[data-id]"),i=[],l=[],u=[],E=0;function m(r,e){var a,d;d=v.thirdParam&&"ignore"===v.thirdParam?(a=jQuery(r).find("select#"+v.placeholder_name)).find("option:selected").text():(a=jQuery(r).find("input")).val();var t,s=jQuery(r);u.indexOf(e)<0?!d||d.length<=0?(Emarsys.addError(s,Resources.EMPTY_PLACEHOLDER_ERROR),Emarsys.addErrorClass(a,"red"),Emarsys.removeError(a,s,"red"),E=1):v.thirdParam&&"ignore"===v.thirdParam&&d===v.placeholder_placeholder?(t=Emarsys.selectErrorMessage(s,Resources.EMPTY_PLACEHOLDER_ERROR,Resources.EMPTY_ATTRIBUTE_ERROR),Emarsys.addError(s,t),Emarsys.addErrorClass(a,"red"),Emarsys.removeError(a,s,"red"),E=1):0<=l.indexOf(d)?(t=Emarsys.selectErrorMessage(s,Resources.SAME_PLACEHOLDER_ERROR,Resources.SAME_ATTRIBUTE_ERROR),Emarsys.addError(s,t),Emarsys.addErrorClass(a,"red"),Emarsys.removeError(a,s,"red"),E=1):(l.push(d),a.removeClass("red")):a.removeClass("red")}e=v.thirdParam&&"button"===v.thirdParam?(r=jQuery("input[name$="+v.thirdParamName+"]:checked"),jQuery("input[name$="+v.thirdParamName+"]:checked").val()):(r=jQuery("select[name$=_externalEvent]")).find("option:selected").text();for(var p=0;p<n.length;p++){var c=jQuery(n[p]).attr("id"),y=jQuery(n[p]).attr("data-id");switch(c){case"l":jQuery(n[p]).find("input[name$=_removeField]").prop("checked")&&u.push(y),a=n[p],t=d=void 0,d=jQuery(a).find("select"),t=d.find("option:selected").text(),s=jQuery(a).find("input[name$=_removeField]").prop("checked"),o=jQuery(a),s?d.removeClass("red"):!t||t.length<=0||t.toString()===v.mappedField_placeholder?(Emarsys.addError(o,Resources.SELECT_ELEMENT_ERROR),Emarsys.addErrorClass(d,"red"),Emarsys.removeError(d,o,"red"),E=1):0<=i.indexOf(t)?(Emarsys.addError(o,Resources.SAME_ELEMENT_ERROR),Emarsys.addErrorClass(d,"red"),Emarsys.removeError(d,o,"red"),E=1):(i.push(t),d.removeClass("red"));break;case"r":m(n[p],y)}}return v.thirdParam||"ignore"===v.thirdParam||(!e&&e.length<=0||e===v.externalEvents_placeholder)&&(Emarsys.addError(r.parent(),Resources.SELECT_EVENT_ERROR),Emarsys.addErrorClass(r,"red"),Emarsys.removeError(r,r.parent(),"red"),E=1),!(0<E)})},selectErrorMessage:function(r,e,a){var d=e;return r.hasClass("attribute")&&(d=a),d},validateMappedFields:function(r){jQuery("p.error").text("");var e,a,d,t,s=jQuery("[data-id]"),o=[],n=[],i=0;for(var l=0;l<s.length;l++){switch(jQuery(s[l]).attr("id")){case"l":e=s[l],t=d=a=void 0,a=jQuery(e),d=a.find("select"),t=d.find("option:selected").text(),a.find("input[name$=_removeField]").prop("checked")||(!t||t.length<=0||t.toString()===r.mappedField_placeholder?(Emarsys.addError(a,Resources.SELECT_ELEMENT_ERROR),Emarsys.addErrorClass(d,"red"),Emarsys.removeError(d,a,"red"),i=1):0<=o.indexOf(t)?(Emarsys.addError(a,Resources.SAME_ELEMENT_ERROR),Emarsys.addErrorClass(d,"red"),Emarsys.removeError(d,a,"red"),i=1):(o.push(t),d.removeClass("red")));break;case"r":var u=jQuery(s[l]).find("input"),E=u.val(),m=jQuery(s[l]),p="[data-id="+u.parent().data("id")+"]",c=jQuery("div#l").filter(p);jQuery(c).find("input[name$=_removeField]").prop("checked")||(!E||E.length<=0?(Emarsys.addError(m,Resources.EMPTY_PLACEHOLDER_ERROR),Emarsys.addErrorClass(u,"red"),Emarsys.removeError(u,m,"red"),i=1):0<=n.indexOf(E)?(Emarsys.addError(m,Resources.SAME_PLACEHOLDER_ERROR),Emarsys.addErrorClass(u,"red"),Emarsys.removeError(u,m,"red"),i=1):(n.push(E),u.removeClass("red")))}}return i},validateShipping:function(r,d){jQuery(r).submit(function(){jQuery("p.error").text("");var r=jQuery("select[name$=_externalEvent]"),e=r.find("option:selected").text(),a=0;return a=Emarsys.validateMappedFields(d),(!e&&e.length<=0||e===d.externalEvents_placeholder)&&(Emarsys.addError(r.parent(),Resources.SELECT_EVENT_ERROR),Emarsys.addErrorClass(r,"red"),Emarsys.removeError(r,r.parent(),"red"),a=1),!(0<a)})},validateSubscription:function(){var r=jQuery("select.subscriptionStrategy"),e=r.closest("tr").siblings()[0],a=jQuery(e).find("span.star");"2"===r.val()&&a.removeClass("hide");var d=jQuery(r).closest("form"),t=d.find("select.externalEventOptin");jQuery(r).on("change",function(){jQuery(a).toggleClass("hide"),"1"===r.val()&&(t.removeClass("red"),t.parent().find(".error").text(""))}),jQuery(d).submit(function(){return r.val()&&"2"===r.val()?!!t.val()||(Emarsys.addErrorClass(t,"red"),Emarsys.addError(t.parent(),Resources.SELECT_EVENT_ERROR),Emarsys.removeError(t,t.parent(),"red"),!1):!(!r.val()||"1"!==r.val())||void 0})},validateSmartInsight:function(r,e){jQuery(r).submit(function(){jQuery("p.error").text("");return!(0<Emarsys.validateMappedFields(e))})},validateSendEmailConfirmationEmail:function(){var r=jQuery("#sendOrderConfirmationEmail"),e=r.find("input[type=text]"),a=r.find(".error");r.submit(function(){return e.val()?(a.html(""),!0):(a.html(Resources.ORDER_NUMBER_ERROR),!1)})}}},{}]},{},[1]);
//# sourceMappingURL=main.js.map
